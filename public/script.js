async function fetchHistorico(){const r=await fetch('/historico');const d=await r.json();const l=d.map((_,i)=>i+1);const w=d.map(x=>x.energy);new Chart(document.getElementById('whChart').getContext('2d'),{type:'line',data:{labels:l,datasets:[{label:'Energia (Wh)',data:w,borderWidth:2}]}});const last=d[d.length-1].power;let st='Baixo consumo';if(last>3000)st='Alto consumo';else if(last>1500)st='MÃ©dio consumo';document.getElementById('anomaliaText').innerText=st;}fetchHistorico();